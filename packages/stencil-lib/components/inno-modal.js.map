{"file":"inno-modal.js","mappings":"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","names":["InnoModal"],"sources":["src/utils/animation.ts","src/utils/waitForElement.ts","src/components/inno-modal/inno-modal.scss?tag=inno-modal&encapsulation=scoped","src/components/inno-modal/inno-modal.tsx"],"sourcesContent":["/**\r\n * Commonly used animation duration values in ms.\r\n */\r\nexport default abstract class Animation {\r\n  static readonly shortTime = 0;\r\n  static readonly defaultTime = 150;\r\n  static readonly mediumTime = 300;\r\n  static readonly slowTime = 500;\r\n  static readonly xSlowTime = 1000;\r\n}\r\n","export function waitForElement<R extends HTMLElement>(selector: string, doc: any, timeout = 3000): Promise<R> {\r\n  return new Promise<R>((resolve, reject) => {\r\n    const startTime = Date.now();\r\n\r\n    const checkIfElementExist = () => {\r\n      const dialog = doc.querySelector(selector) satisfies R;\r\n\r\n      if (dialog) {\r\n        resolve(dialog);\r\n      } else {\r\n        if (Date.now() - startTime < timeout) {\r\n          setTimeout(checkIfElementExist);\r\n        } else {\r\n          reject();\r\n        }\r\n      }\r\n    };\r\n\r\n    checkIfElementExist();\r\n  });\r\n}\r\n","@use '@innomotics/brand-experience/styles/colors' as colors;\r\n@use '../../../styles/breakpoints' as breakpoints;\r\n\r\n:focus-visible {\r\n  outline: none !important;\r\n}\r\n\r\n:host {\r\n  display: none;\r\n\r\n  dialog {\r\n    margin: 0;\r\n    padding: 32px;\r\n    left: 50%;\r\n  }\r\n\r\n  dialog::backdrop {\r\n    backdrop-filter: blur(4px);\r\n    -webkit-backdrop-filter: blur(4px);\r\n    background: colors.$backdrop;\r\n  }\r\n\r\n  .modal {\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n    border: none;\r\n    background: colors.$primary-200;\r\n    overflow: visible;\r\n    max-height: 100vh;\r\n    pointer-events: all;\r\n\r\n    &.fixed {\r\n      position: fixed;\r\n    }\r\n  }\r\n\r\n  .modal-size-360 {\r\n    width: 22.5rem;\r\n  }\r\n\r\n  .modal-size-480 {\r\n    width: 30rem;\r\n  }\r\n\r\n  .modal-size-600 {\r\n    width: 37.5rem;\r\n  }\r\n\r\n  .modal-size-720 {\r\n    width: 45rem;\r\n  }\r\n\r\n  .modal-size-840 {\r\n    width: 52.5rem;\r\n  }\r\n\r\n  .modal-size-full-width {\r\n    width: 95%;\r\n  }\r\n\r\n  .modal-size-fit-content {\r\n    width: fit-content;\r\n  }\r\n\r\n  .modal-size-full-screen {\r\n    left: 0 !important;\r\n    top: 0 !important;\r\n    transform: none !important;\r\n\r\n    width: calc(100% - 28px);\r\n    min-width: calc(100% - 28px);\r\n    max-width: calc(100% - 28px);\r\n\r\n    height: calc(100% - 28px);\r\n    min-height: calc(100% - 28px);\r\n    max-height: calc(100% - 28px);\r\n  }\r\n\r\n  .dialog-backdrop {\r\n    display: block;\r\n    position: fixed;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    top: 0;\r\n    left: 0;\r\n\r\n    pointer-events: none;\r\n  }\r\n\r\n  ::slotted(inno-modal-footer) {\r\n    margin-top: auto;\r\n  }\r\n}\r\n\r\n:host(.visible) {\r\n  display: block;\r\n}\r\n\r\n:host(.align-center) {\r\n  dialog {\r\n    margin: 0;\r\n    left: 50%;\r\n    top: 50%;\r\n  }\r\n}\r\n\r\n:host(.no-backdrop) {\r\n  dialog::backdrop {\r\n    background-color: transparent !important;\r\n    backdrop-filter: none !important;\r\n  }\r\n}\r\n\r\n:host(.with-icon) {\r\n\r\n  ::slotted(inno-modal-footer),\r\n  ::slotted(inno-modal-content) {\r\n    margin-left: 2.5rem;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: breakpoints.$desktop) {\r\n  :host {\r\n    dialog {\r\n      margin: 0;\r\n      left: 50%;\r\n      top: 50%;\r\n      transform: translate(-50%, -50%) !important;\r\n    }\r\n\r\n    .modal {\r\n      width: 95%;\r\n    }\r\n  }\r\n}","import { Component, Host, h, Element, Prop, State, Event, EventEmitter, Method, Listen } from '@stencil/core';\r\nimport anime from 'animejs';\r\nimport { A11yAttributes, a11yBoolean, a11yHostAttributes } from '../../utils/a11y';\r\nimport Animation from '../../utils/animation';\r\nimport { waitForElement } from '../../utils/waitForElement';\r\nimport { InnoModalSize } from './inno-modal.model';\r\n\r\n/**\r\n * Represents the main frame of the modal component.\r\n */\r\n@Component({\r\n  tag: 'inno-modal',\r\n  styleUrl: 'inno-modal.scss',\r\n  scoped: true,\r\n})\r\nexport class InnoModal {\r\n  private ariaAttributes: A11yAttributes = {};\r\n\r\n  @Element() hostElement!: HTMLElement;\r\n\r\n  @State() modalVisible = false;\r\n\r\n  /**\r\n   * Theme variant of the component.\r\n   */\r\n  @Prop({ mutable: true }) variant: 'dark' | 'light' = 'light';\r\n\r\n  /**\r\n   * Modal size\r\n   */\r\n  @Prop() size: InnoModalSize = '720';\r\n\r\n  /**\r\n   * Should the modal be animated\r\n   */\r\n  @Prop() animation = true;\r\n\r\n  /**\r\n   * Show a backdrop behind the modal dialog\r\n   */\r\n  @Prop() backdrop = true;\r\n\r\n  /**\r\n   * Dismiss modal on backdrop click\r\n   */\r\n  @Prop() closeOnBackdropClick = true;\r\n\r\n  /**\r\n   * Centered modal\r\n   */\r\n  @Prop() centered = false;\r\n\r\n  /**\r\n   * By default the modal always opens at the top and the InnoModal component automatically scrolls to it.\r\n   * Set this to true if you want the modal to be always in a fixed position no matter where you scroll.\r\n   */\r\n  @Prop() fixed: boolean = false;\r\n\r\n  /**\r\n   * If set to true the modal can be closed by pressing the Escape key\r\n   */\r\n  @Prop() closeOnEscape = true;\r\n\r\n  /**\r\n   * Dialog close\r\n   */\r\n  @Event() dialogClose: EventEmitter;\r\n\r\n  /**\r\n   * Dialog cancel\r\n   */\r\n  @Event() dialogDismiss: EventEmitter;\r\n\r\n  private clickStartedInsideDialog: boolean | undefined = undefined;\r\n\r\n  get dialog() {\r\n    return this.hostElement.querySelector('dialog');\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.slideInModal();\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.ariaAttributes = a11yHostAttributes(this.hostElement);\r\n  }\r\n\r\n  // Handle keydown on modal content window\r\n  @Listen('keydown')\r\n  onKey(e: KeyboardEvent) {\r\n    if (e.key === 'Escape') {\r\n      e.preventDefault();\r\n      if (this.closeOnEscape) {\r\n        this.dismissModal();\r\n      } else {\r\n        e.stopPropagation();\r\n      }\r\n    } else {\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the dialog.\r\n   */\r\n  @Method()\r\n  async showModal() {\r\n    try {\r\n      const dialog = await waitForElement<HTMLDialogElement>('dialog', this.hostElement);\r\n      this.modalVisible = true;\r\n      dialog.showModal();\r\n\r\n      if (!this.fixed) {\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      }\r\n    } catch (e) {\r\n      console.error('HTMLDialogElement not existing');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Dismiss the dialog\r\n   */\r\n  @Method()\r\n  async dismissModal<T = any>(reason?: T) {\r\n    this.slideOutModal(() => {\r\n      this.modalVisible = false;\r\n      this.dialog.close(JSON.stringify({ type: 'dismiss', reason }));\r\n      this.dialogDismiss.emit(reason);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close the dialog\r\n   */\r\n  @Method()\r\n  async closeModal<T = any>(reason: T) {\r\n    this.slideOutModal(() => {\r\n      this.dialog.close(JSON.stringify({ type: 'close', reason }));\r\n      this.dialogClose.emit(reason);\r\n    });\r\n  }\r\n\r\n  private slideInModal() {\r\n    const duration = this.animation ? Animation.mediumTime : 0;\r\n    let transformY = this.centered ? '-50%' : 40;\r\n\r\n    anime({\r\n      targets: this.dialog,\r\n      duration,\r\n      opacity: [0, 1],\r\n      translateY: [0, transformY],\r\n      translateX: ['-50%', '-50%'],\r\n      easing: 'easeOutSine',\r\n    });\r\n  }\r\n\r\n  private slideOutModal(completeCallback: Function) {\r\n    const duration = this.animation ? Animation.mediumTime : 0;\r\n    let transformY = this.centered ? '-50%' : 40;\r\n\r\n    anime({\r\n      targets: this.dialog,\r\n      duration,\r\n      opacity: [1, 0],\r\n      translateY: [transformY, 0],\r\n      translateX: ['-50%', '-50%'],\r\n      easing: 'easeInSine',\r\n      complete: () => {\r\n        if (completeCallback) {\r\n          completeCallback();\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  private onDialogCancel(event: Event) {\r\n    // Check escape default behavior on modal backdrop\r\n    if (!this.closeOnEscape) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    // Cancel the default dialog close behaviour\r\n    event.preventDefault();\r\n    this.dismissModal();\r\n  }\r\n\r\n  private onModalClick(event: MouseEvent) {\r\n    if (event.target !== this.dialog) {\r\n      return;\r\n    }\r\n\r\n    if (!this.isClickInsideDialog(event) && this.closeOnBackdropClick && !this.clickStartedInsideDialog) {\r\n      this.clickStartedInsideDialog = undefined;\r\n      this.dismissModal();\r\n    }\r\n    this.clickStartedInsideDialog = undefined;\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent) {\r\n    if (this.closeOnBackdropClick && this.isClickInsideDialog(event)) {\r\n      this.clickStartedInsideDialog = true;\r\n    } else {\r\n      this.clickStartedInsideDialog = false;\r\n    }\r\n  }\r\n\r\n  private isClickInsideDialog(event: MouseEvent): boolean {\r\n    const rect = this.dialog.getBoundingClientRect();\r\n    return rect.top <= event.clientY && event.clientY <= rect.top + rect.height && rect.left <= event.clientX && event.clientX <= rect.left + rect.width;\r\n  }\r\n\r\n  private dialogElement() {\r\n    const classes = {\r\n      modal: true,\r\n      fixed: this.fixed,\r\n      [`modal-size-${this.size}`]: true,\r\n    };\r\n\r\n    return (\r\n      <div class=\"dialog-backdrop\">\r\n        <dialog\r\n          aria-modal={a11yBoolean(true)}\r\n          aria-describedby={this.ariaAttributes['aria-describedby']}\r\n          aria-labelledby={this.ariaAttributes['aria-labelledby']}\r\n          class={classes}\r\n          onClick={e => this.onModalClick(e)}\r\n          onCancel={e => this.onDialogCancel(e)}\r\n          onMouseDown={e => this.onMouseDown(e)}\r\n        >\r\n          <slot></slot>\r\n        </dialog>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const hostClasses = {\r\n      'visible': this.modalVisible,\r\n      'no-backdrop': !this.backdrop,\r\n      'align-center': this.centered,\r\n    };\r\n\r\n    return <Host class={hostClasses}>{this.dialogElement()}</Host>;\r\n  }\r\n}\r\n"],"version":3}